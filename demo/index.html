<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>lighty-slide</title>
	<!-- <link rel="stylesheet" type="text/css" href="style.css"> -->
	<style>
	body {
		margin: 0;
		padding: 20px;
		font-family: Calibri;
	}
	a {
		text-decoration: none;
		color: black;
	}

	.header {
		font-size: 2em;
		margin: 0 0 20px 0;
	}

	.text {
		font-size: 1.2em;
	}


	</style>
</head>
<body>

<div class="header lighty-slide" data-lighty_slide="slide:100px; direction:bottom; duration:0.5s; opacity:0">Header text</div>

<div class="text lighty-slide" data-lighty_slide="slide:150px; direction:left; duration:1s; opacity:0">Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s</div>

<script>

function log(param) {
	return console.log(param);
}

window.onload = function() {
	var nodes = document.querySelectorAll(".lighty-slide");

	for (i = 0; i < nodes.length; i++) {

		var node = nodes[i];

		// Récupère la "string" de "data-lighty_slide".
		// Array [ "slide:50px"; direction: "left"; "transition:2s" ]
		var raw_data = node.dataset.lighty_slide.split(";");

		// Object { slide: "50px", direction: "left", transition: "1s" }
		var data = new Object();

		// Création de l'objet à partir de la string.
		for (x = 0; x < raw_data.length; x++) {
			
			var split = raw_data[x].split(":");

			var property = split[0];
			// Supprime les espaces dans "data-lighty_slide"
			if (property[0] == " ") {property = property.substring(1);}
			var value = split[1];

			data[property] = value;
		}

		function direction(direc, value) {
			if (direc == "top") return "translateY(" + value + ")";
			if (direc == "bottom") return "translateY(-" + value + ")";
			if (direc == "left") return "translateX(" + value + ")";
			if (direc == "right") return "translateX(-" + value + ")";
		}

		// log(data)

		// Création de l'animation et timing.
		var keyframe = [
			{
				transform: direction(data.direction, data.slide),
				opacity: parseInt(data.opacity)
			}, {
				transform: "translateX(0px)",
				opacity: 1
			}
		];

		var options = {
			duration: parseFloat(data.duration.slice(0, -1)) * 1000,
			easing: 'ease-out'
		};

		// Ajout de l'animation
		node.animate(keyframe, options);
	}
}

</script>

</body>
</html>